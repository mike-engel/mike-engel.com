<!doctype html><html lang=en><meta charset=utf-8><meta content="initial-scale=1.0,width=device-width" name=viewport><meta content=#0B2940 name=theme-color><meta content=ac56949deddb26b9107af368eea0b43b name=p:domain_verify><meta content="So you want to use images on your site. You’re also concerned about performance and bandwidth. You’ve heard about this new thing called “responsive images”. They sound pretty great. You can use different sized images for different sized screens. You can even show one image on mobile, and another on desktop. Then it dawns on you. You have 20 photos on your site. You have four breakpoints in your CSS. That could be up to 80 photos you have to manage. Fret not. We’re going to use the internet." name=description><title> No Bake Responsive Images </title><link href=https://mike-engel.com/manifest.json rel=manifest><link href=https://mike-engel.com/favicon.ico rel=icon type=image/png><link title="Mike Engel" href=https://mike-engel.com/index.xml rel=alternate type=application/rss+xml><link href=https://mike-engel.com/site.css rel=stylesheet><body><header class=header><nav class=site-constraint><a aria-label="click to go to the home page" class=hidden-link href=/> <svg viewbox="0 0 46 50" height=50px version=1.1 width=46px xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><path d="M0,9.26966292 L0,50 L12,44.9438202 L12,0 L0,9.26966292 Z M46,9.26966292 L46,50 L34,44.9438202 L34,0 L46,9.26966292 Z M12,0 L12,19.1964286 L23,33.59375 L23,14.9619223 L12,0 Z M34,0 L34,19.1964286 L23,33.59375 L23,14.9619223 L34,0 Z"></path></svg> </a><ul class=plain-list><li><a class=text--semibold href=/#recent-projects>projects</a><li><a class=text--semibold href=/#contact>contact</a><li><a class=text--semibold href=/photography/>Photography</a><li><a class=text--semibold href=/writing/>Writing</a><li><a class=text--semibold href=/resume/>Resume</a></ul></nav></header><div id=content><main class=site-constraint><article><h1 id=no-bake-responsive-images>No-bake responsive images</h1><p>So you want to use images on your site. You’re also concerned about performance and bandwidth. You’ve heard about this new thing called “responsive images”. They sound pretty great. You can use different sized images for different sized screens. You can even show one image on mobile, and another on desktop. Then it dawns on you. You have 20 photos on your site. You have four breakpoints in your CSS. That could be up to 80 photos you have to manage. Fret not. We’re going to use the internet.<h2 id=a-preamble>A preamble</h2><p>So, you’re reading this and maybe you haven’t used responsive images before. Maybe you’ve heard of responsive web design, but not responsive images. Let me briefly explain what they are and why they exist.<p>Since the dawn of the <code>&LTimg></code> tag, images have become really easy to add to a webpage. That comes at a cost though. As we got into the age of 27“ monitors, retina screens, smartphones, and now 5K displays, we’ve found ourselves delivering megabytes of data to all screens on all connections. A group of people knew it could be better and formed the <a rel="nofollow noreferrer" href=http://ricg.io>Responsive Issues Community Group</a> to solve this problem (and more like it as time goes on). Out comes <strong>srcset</strong>, <strong>sizes</strong>, and <strong>picture</strong>. This is supposed to be a brief tour, so instead I’m going to point you to Eric Portis’ excellent post, <a rel="nofollow noreferrer" href=http://ericportis.com/posts/2014/srcset-sizes/>Srcset & Sizes</a>. You should also read the <a rel="nofollow noreferrer" href=https://scottjehl.github.com/picturefill>Picturefill demo site</a>, which contains a bunch of examples on srcset, sizes, and picture.<p>If you want a single image’s content on all screen sizes, but want to serve the minimum number of pixels needed for the screen, the markup looks a little like this:<pre class=language-html data-lang=html style=background-color:#2e3440;color:#d8dee9;><code class=language-html data-lang=html><span style=color:#81a1c1;>&LTimg
</span><span style=color:#eceff4;>  </span><span style=color:#8fbcbb;>src</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"fallback.jpg"
</span><span style=color:#eceff4;>  </span><span style=color:#8fbcbb;>srcset</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"small.jpg 320w, medium.jpg 768w, large.jpg 1024w, superHuge.jpg 5000w"
</span><span style=color:#eceff4;>  </span><span style=color:#8fbcbb;>sizes</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"(min-width: 1024px) 50vw, 100vw"
</span><span style=color:#81a1c1;>/>
</span></code></pre><p>Want to show one image optimized for mobile, and another for desktop? Picture’s got you covered.<pre class=language-html data-lang=html style=background-color:#2e3440;color:#d8dee9;><code class=language-html data-lang=html><span style=color:#81a1c1;>&LTpicture>
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>&LTsource </span><span style=color:#8fbcbb;>srcset</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"desktop-1024.jpg 1024w, desktop-5000.jpg 5000w" </span><span style=color:#8fbcbb;>media</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"(min-width: 1024px)>
</span><span style=color:#a3be8c;>  &LTsource srcset="</span><span style=color:#8fbcbb;>mobile-320.jpg 320w, mobile-768.jpg 768w</span><span style=background-color:#bf616a;color:#d8dee9;>"</span><span style=color:#eceff4;> </span><span style=color:#8fbcbb;>media</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"(min-width: 320px)>
</span><span style=color:#a3be8c;>  &LTimg src="</span><span style=color:#8fbcbb;>fallback.jpg</span><span style=background-color:#bf616a;color:#d8dee9;>"</span><span style=color:#eceff4;> </span><span style=color:#81a1c1;>/>
</span><span style=color:#81a1c1;>&LT/picture>
</span></code></pre><p>This is great — we’ve now got the ability to save user’s bandwidth and serve different photos on different screen sizes. But if you’re looking at those srcset attributes and thinking, “wow, that’s a lot of images to create and maintain.” I feel you. Sure there are tools for gulp and grunt and some other build tool I’m sure, but you still have to create and maintain a config file, manage all those images on your server, recompile all of them if the image changes, yadda yadda yadda.<h2 id=cloud-processing-cloud-processing>Cloud processing? Cloud processing.</h2><p>If you’re tired of hearing about the cloud, I’m sorry. But hear me out because the cloud may just make implementing responsive images as easy as an <code>&LTimg></code> tag.<p>The two services I know of (there are probably more) are <a rel="nofollow noreferrer" href=http://www.imgix.com/>Imgix</a> and <a rel="nofollow noreferrer" href=http://cloudinary.com/>Cloudinary</a>. If you’ve never heard of them, they allow you to customize and change images using query parameters in your URL. They can do a lot of really cool things, but I’m only going to touch on one feature here: <em>scaling</em>. You’ve probably guessed where this is going by now.<p>We’re going to upload <em>one</em> really big master image and let the cloud handle the different sizes we need. Let’s get to an example. Remember the simple img example we had before? Here’s what it looks like with <em>the cloud</em>.<pre class=language-html data-lang=html style=background-color:#2e3440;color:#d8dee9;><code class=language-html data-lang=html><span style=color:#81a1c1;>&LTimg
</span><span style=color:#eceff4;>  </span><span style=color:#8fbcbb;>src</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"https://res.cloudinary.com/beardfury/image/upload/c_scale,w_1000/v1444865801/forest.jpg"
</span><span style=color:#eceff4;>  </span><span style=color:#8fbcbb;>srcset</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"
</span><span style=color:#a3be8c;>    https://res.cloudinary.com/beardfury/image/upload/c_scale,w_320/v1444865801/forest.jpg   320w,
</span><span style=color:#a3be8c;>    https://res.cloudinary.com/beardfury/image/upload/c_scale,w_768/v1444865801/forest.jpg   768w,
</span><span style=color:#a3be8c;>    https://res.cloudinary.com/beardfury/image/upload/c_scale,w_1024/v1444865801/forest.jpg 1024w,
</span><span style=color:#a3be8c;>    https://res.cloudinary.com/beardfury/image/upload/c_scale,w_5000/v1444865801/forest.jpg 5000w
</span><span style=color:#a3be8c;>  "
</span><span style=color:#eceff4;>  </span><span style=color:#8fbcbb;>sizes</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"(min-width: 1024px) 50vw, 100vw"
</span><span style=color:#81a1c1;>/>
</span></code></pre><p>Want those different images on mobile and desktop? Well, you have to upload <em>two</em> photos now, but it’s still better than 5.<pre class=language-html data-lang=html style=background-color:#2e3440;color:#d8dee9;><code class=language-html data-lang=html><span style=color:#81a1c1;>&LTpicture>
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>&LTsource
</span><span style=color:#eceff4;>    </span><span style=color:#8fbcbb;>srcset</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"
</span><span style=color:#a3be8c;>      https://res.cloudinary.com/beardfury/image/upload/c_scale,w_1024/v1444865801/forest.jpg 1024w,
</span><span style=color:#a3be8c;>      https://res.cloudinary.com/beardfury/image/upload/c_scale,w_5000/v1444865801/forest.jpg 5000w
</span><span style=color:#a3be8c;>    "
</span><span style=color:#eceff4;>    </span><span style=color:#8fbcbb;>media</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"(min-width: 1024px)"
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>/>
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>&LTsource
</span><span style=color:#eceff4;>    </span><span style=color:#8fbcbb;>srcset</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"
</span><span style=color:#a3be8c;>      https://res.cloudinary.com/beardfury/image/upload/c_scale,w_320/v1444865801/forest.jpg 320w,
</span><span style=color:#a3be8c;>      https://res.cloudinary.com/beardfury/image/upload/c_scale,w_768/v1444865801/forest.jpg 768w
</span><span style=color:#a3be8c;>    "
</span><span style=color:#eceff4;>    </span><span style=color:#8fbcbb;>media</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"(min-width: 320px)"
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>/>
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>&LTimg
</span><span style=color:#eceff4;>    </span><span style=color:#8fbcbb;>src</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"https://res.cloudinary.com/beardfury/image/upload/c_scale,w_1000/v1444865801/forest.jpg"
</span><span style=color:#eceff4;>    </span><span style=color:#8fbcbb;>alt</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"Green forest scene"
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>/>
</span><span style=color:#81a1c1;>&LT/picture>
</span></code></pre><p>Image management? Piece of cake. It’s like it used to be again. You know, the good old days of <code>&LTimg></code> before all this responsive stuff came about. The days where we used one <em>huge</em> image to cover all bases and forced the user to wait 30 seconds for that 24 megapixel picture of a cat to download.<h2 id=one-up>One up</h2><p>You might be thinking this is cool, but you’ve still got to manage all those pesky urls in your markup. I mean, it’s still way easier, but yeah, it can be better. If you’re using a templating system like Handlebars or EJS, <em>it’s time to get crazy</em>.<p>Because I prefer EJS, these examples are going to be written with EJS. First, let’s write a function to create <strong>src</strong> and <strong>srcset</strong> strings for us.<pre class=language-jsx data-lang=jsx style=background-color:#2e3440;color:#d8dee9;><code class=language-jsx data-lang=jsx><span>function generateResponsiveString(filename, widths, isFallback) {
</span><span>  "use strict";
</span><span>
</span><span>  const urlPrefix = "https://res.cloudinary.com/beardfury/image/upload/c_scale,w_";
</span><span>
</span><span>  let fullString = "";
</span><span>
</span><span>  if (isFallback) {
</span><span>    return urlPrefix + widths + filename;
</span><span>  }
</span><span>
</span><span>  widths.forEach(function(width) {
</span><span>    fullString += urlPrefix + width + filename + " " + width + "w, ";
</span><span>  });
</span><span>
</span><span>  // strip the trailing comma and space
</span><span>  return fullString.substr(0, fullString.length - 2);
</span><span>}
</span></code></pre><p>Ok, cool. Now let’s use it in a template.<pre class=language-html data-lang=html style=background-color:#2e3440;color:#d8dee9;><code class=language-html data-lang=html><span style=color:#81a1c1;>&LTdiv </span><span style=color:#8fbcbb;>class</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"portfolio-item-1"</span><span style=color:#81a1c1;>>
</span><span style=color:#eceff4;>  </span><span style=color:#81a1c1;>&LTimg </span><span style=color:#8fbcbb;>src</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"<%= responsiveImageString('v1444865801/forest.jpg', 1000, true) %>" </span><span style=color:#8fbcbb;>srcset</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"<%=
</span><span style=color:#a3be8c;>  responsiveImageString('v1444865801/forest.jpg', [320, 768, 1024, 5000]) %>" </span><span style=color:#8fbcbb;>sizes</span><span style=color:#eceff4;>=</span><span style=color:#a3be8c;>"(min-width:
</span><span style=color:#a3be8c;>  1024px) 50vw, 100vw) alt="</span><span style=color:#8fbcbb;>Green forest scene</span><span style=background-color:#bf616a;color:#d8dee9;>"</span><span style=color:#81a1c1;>>
</span><span style=color:#81a1c1;>&LT/div>
</span></code></pre><p>Responsive images. Using the cloud. Without much typing. Barely any typing at all.<h2 id=use-it-right-now>Use it right now</h2><p>Go on, try it. <a rel="nofollow noreferrer" href=http://cloudinary.com/>Cloudinary</a> is free to start and then starts pricing in tiers and plugins. <a rel="nofollow noreferrer" href=https://www.imgix.com/>Imgix</a> charges a couple bucks for a bunch of photos, with bandwidth on top of that. I’ll let you choose which you like best. If you want a self-hosted solution, a quick search on github produced two options written in Go: <a rel="nofollow noreferrer" href=https://github.com/ReshNesh/pixlserv>pixlserv</a> and <a rel="nofollow noreferrer" href=https://github.com/h2non/imaginary>imaginary</a>.<p>You’re also going to want to use <a rel="nofollow noreferrer" href=https://github.com/scottjehl/picturefill>Picturefill</a>, the responsive image polyfill. Why? Unfortunately, not all browsers support <strong>picture</strong>, and older ones don’t even support <strong>srcset</strong> or <strong>sizes</strong>.<p>Want to play around with this or see it in action? Here’s a <a rel="nofollow noreferrer" href=http://codepen.io/mike-engel/pen/avLVvW>codepen</a> for you.<p>Client hints are something to keep an eye on, as they’re going to make this process <em>even easier</em>. For more info, check out this post by <a rel="nofollow noreferrer" href=https://blog.imgix.com/2015/10/13/next-generation-responsive-images-with-client.html>imgix</a>.<p>Use your new spare time to learn something cool.</article></main></div><footer class="footer site-constraint text--xs"><span class=text--darker>© 2022 Mike Engel</span><a href=https://github.com/mike-engel rel=noreferrer target=_blank>GitHub</a><a href=https://matrix.to/#/@vegemike:matrix.org rel=noreferrer target=_blank>[matrix]</a><a href=https://twitter.com/beardfury rel=noreferrer target=_blank>Twitter</a><a href=https://im-in.space/@vegemike rel=me target=_blank>Mastodon</a><a href=https://www.instagram.com/vegemike rel=noreferrer target=_blank>Instagram</a><a href=https://mike-engel.com/index.xml rel=noreferrer target=_blank>RSS feed</a></footer>