<!doctype html><html lang=en><meta charset=utf-8><meta content="initial-scale=1.0,width=device-width" name=viewport><meta content=#0B2940 name=theme-color><meta content=ac56949deddb26b9107af368eea0b43b name=p:domain_verify><meta content="Introducing Locale, a polyfill to understand your users’ preferred languages." name=description><title> Introducing Locale </title><link href=https://mike-engel.com/manifest.json rel=manifest><link href=https://mike-engel.com/favicon.ico rel=icon type=image/png><link title="Mike Engel" href=https://mike-engel.com/index.xml rel=alternate type=application/rss+xml><link href=https://mike-engel.com/site.css rel=stylesheet><body><header class=header><nav class=site-constraint><a aria-label="click to go to the home page" class=hidden-link href=/> <svg viewbox="0 0 46 50" height=50px version=1.1 width=46px xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><path d="M0,9.26966292 L0,50 L12,44.9438202 L12,0 L0,9.26966292 Z M46,9.26966292 L46,50 L34,44.9438202 L34,0 L46,9.26966292 Z M12,0 L12,19.1964286 L23,33.59375 L23,14.9619223 L12,0 Z M34,0 L34,19.1964286 L23,33.59375 L23,14.9619223 L34,0 Z"></path></svg> </a><ul class=plain-list><li><a class=text--semibold href=/#recent-projects>projects</a><li><a class=text--semibold href=/#contact>contact</a><li><a class=text--semibold href=/photography/>Photography</a><li><a class=text--semibold href=/writing/>Writing</a><li><a class=text--semibold href=/resume/>Resume</a></ul></nav></header><div id=content><main class=site-constraint><article><h1 id=introducing-locale>Introducing Locale</h1><p>Today, I’m publishing a tiny api called <a rel="nofollow noreferrer" href=https://locale.now.sh>Locale</a> which is meant to polyfill <code>window.navigator.languages</code> for internationalized apps.<h2 id=a-better-internationalization-experience>A better internationalization experience</h2><p>At the moment, it’s pretty common for internationalized apps to either serve the primary language for the user, or serve the language the owner uses most and provide a drop down to change the language. On server-rendered applications, the <code>Accept-Language</code> header is available to get a list of the user’s preferred languages. This way, you can serve their primary language (if you support it), and prioritize alternatives based on their other system languages.<p>There’s a gap, however, for single page applications. As of this writing, only Chrome and Firefox support <a rel="nofollow noreferrer" href=https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/languages><code>window.navigator.languages</code></a>. This means that there’s no consistent way to know which languages a user speaks, and in which order, on the front end. Enter Locale, a public API to consistently get that list.<p>With this list, you can immediately present the site in a language the user understands (providing you support those languages), and prioritize alternatives if they want to switch. This provides a much better initial experience for users of your app or site.<h2 id=getting-started>Getting started</h2><p>The API is meant to be small and fast for the least amount of work on your end. You can view the “docs” at <a rel="nofollow noreferrer" href=https://locale.now.sh>locale.now.sh</a>, and view your list of languages by viewing that site or going to <a rel="nofollow noreferrer" href=https://locale.now.sh/api>locale.now.sh/api</a> in your browser.<p>To use it within your app (front or back end!), make a <code>GET</code> request to <code>https://locale.now.sh/api</code>. You can expect a JSON array as the response to do whatever you want with. That’s it!<h2 id=locale-s-architecture>Locale’s architecture</h2><p>Locale is written entirely in <a rel="nofollow noreferrer" href=https://www.rust-lang.org>Rust</a> using <a rel="nofollow noreferrer" href=https://rocket.rs>Rocket</a> as the webserver and hosted on Zeit’s <a rel="nofollow noreferrer" href=https://now.sh>now.sh</a>. I created a crate called <a rel="nofollow noreferrer" href=https://crates.io/crates/accept-language>accept-language</a> which is being used to parse the <code>Accept-Language</code> header. If you’re using Rust, feel free to use it within your own webserver!<p>The overview page is built in plain HTML and JavaScript, and uses <a rel="nofollow noreferrer" href=https://tachyons.io>tachyons</a> for that sweet functional CSS.<h2 id=call-for-contributors>Call for contributors</h2><p>As this library is a polyfill for internationalization, it would be a shame not to provide various languages for the Locale docs. Unfortunately like most Americans, I only speak English and can’t add any other languages myself. If you speak multiple languages, I would love to have your help in translating the page! You can submit an <a rel="nofollow noreferrer" href=https://github.com/mike-engel/locale/issues/new>issue</a> or <a rel="nofollow noreferrer" href=https://github.com/mike-engel/locale/pulls/new>pull request</a> through github.<p>The code is fully <a rel="nofollow noreferrer" href=https://github.com/mike-engel/locale>open source</a> and open to any and all issues and pull requests beyond internationalization.<p>Thanks for reading, and I hope you find Locale useful in whatever you build!</article></main></div><footer class="footer site-constraint text--xs"><span class=text--darker>© 2022 Mike Engel</span><a href=https://github.com/mike-engel rel=noreferrer target=_blank>GitHub</a><a href=https://matrix.to/#/@vegemike:matrix.org rel=noreferrer target=_blank>[matrix]</a><a href=https://twitter.com/beardfury rel=noreferrer target=_blank>Twitter</a><a href=https://im-in.space/@vegemike rel=me target=_blank>Mastodon</a><a href=https://www.instagram.com/vegemike rel=noreferrer target=_blank>Instagram</a><a href=https://mike-engel.com/index.xml rel=noreferrer target=_blank>RSS feed</a></footer>